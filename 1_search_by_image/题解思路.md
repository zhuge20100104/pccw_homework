# 解决方案
 ### 根据题目给出的“以图搜图”的问题，其实是CV方向的问题，其中使用Selenium Webdriver到达页面，找到下属的第三张图。都是非常简单的工具使用问题。
 
 ### 比较麻烦的是证明下属第三张图和待搜索图片的相关性。因为谷歌的图库随着用户上传和网站竞价排名的进行会出现变化，这可能导致本月的第三张图和下月的第三张图不一致，甚至今天上午的第三张图和今天下午的第三张图也不一致。
 
 ### 方法一：猜样本 如果试图使用在大样本里面猜小样本的模式，就是说把所有同类的图都从谷歌上扒下来，然后一张一张比搜索结果是不是在大样本里面，这样会比较耗时，另一个你需要不断的更新你的图库，也是一笔不小的耗费。

 ### 方法二：使用机器学习进行图片预测，这种方法扩展性好，而且不需要重新更新训练的图库，因为相似的图片，特征一般都是一致的。整体设计思路如下，
 1. 从谷歌上找出所有的同类图。如数字0。

 2. 对找出的图片，先做按特征部位裁剪。接着做特征提取。提取过程可以先用opencv做缩放，缩放到比较合适的神经网络输入尺寸，接着灰度化，减少计算量。最后reshape成神经网络需要的输入尺寸。
 
 3. 提取完特征之后，可以搭建一些神经网络分批喂入特征，训练神经网络。训练过程比较耗时，建议尽量使用较好显卡的机器，使用GPU加速训练。训练过程可以使用nvidia-smi查看显卡GPU的利用率。适当增大或缩小批处理大小。基于CV方向的图像识别，如果对精度要求不高的话，可以采用最近比较流行的InceptionNet或者ResNet进行模型训练。
  [训练集样本大约50000张，测试集样本大约10000张即可]
  训练过程在配置较高的机器上，如4-8G显存，大约需要半个小时左右。
  如果我们处理四种类型的图像，那则总共需要 4*30 = 2小时
  神经网络最后会做一个二分类的输出，全连接 + 激活函数，使用softmax激活，输出概率分布。 
   例如输出两个浮点数， 0.75, 0.25, 0.75表示索引0，表示是数字0，所以当前图片就是数字0，0.25表示索引1，他出现的概率小于 0.75，他表示不是数字0. 所以当前是数字0的概率比较大，判定为数字0.

 4. 在第3步训练的过程中，在其中加入检查点，保存最好的模型为pb文件。所以这时，我们针对不同类型的图片有了不同类型的模型，例如以本例的数据为例，有了数字0，雨靴，人和小猫 4个不同的模型。
  模型的不同之处主要在于神经网络前向传播的参数不一样。

 5. 将模型拿到我们的测试用例中进行使用，使用数字0的图片搜索完结果之后，找到第三张结果图。加载神经网络模型，进行前向推理，看下第三张结果图是否是数字0，也就是说 概率分布中， 索引为0的位置的浮点数值是否大于 0.5，如果大于0.5，说明是数字0，测试通过。如果小于0.5，报错，将当前图像移入错误目录。


   

 



